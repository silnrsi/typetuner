Some facts that developers might like to know:

1. TYPETUNER INTERFACE

Presently this CGI script invokes TypeTuner in two ways:

	perl TypeTuner.pl -x output.xml input.ttf
	perl TypeTuner.pl [-n suffix] -o output.ttf applyset input.xml input.ttf

If the command line parameters to TypeTuner.pl change, this CGI scipt 
may need updating.


2. LINE ENDINGS MATTER

On xserve3 (scripts.sil.org), apparently the line-endings do matter for CGI
scripts. I've discovered that CRLF line endings don't work. Therefore I've
set the svn:eol-style property to LF making it possible to edit the file
on Windows and then scp it over to the appropriate folder on xserve.


3. XSERVE3 LOCATIONS

The URL to access this tool is: http://scripts.sil.org/ttw/fonts2go.cgi

The relevant folders on xserve3 are:

/Volumes/Data/Web/NRSI/scripts.sil.org/cms/ttw 
  -- root folder where the fonts2go.cgi should be located

/Volumes/Data/Web/NRSI/scripts.sil.org/cms/ttw/TypeTuner 
  -- subfolder  containing TypeTuner.pl

/Volumes/Data/Web/NRSI/scripts.sil.org/cms/ttw/TypeTuner/tunable-fonts
  -- subfolder containg source font packages. 

/Volumes/Data/Web/NRSI/scripts.sil.org/cms/ttw/TypeTuner/tunable-fonts/Andika Basic
/Volumes/Data/Web/NRSI/scripts.sil.org/cms/ttw/TypeTuner/tunable-fonts/Charis SIL 
/Volumes/Data/Web/NRSI/scripts.sil.org/cms/ttw/TypeTuner/tunable-fonts/Doulos SIL 
etc...
  -- subfolders containing source font packages. As of 2009-10-21 the names of 
     these subfolders may have spaces.
	  -- As of 2010-11-24, a subfolder name containing "test" (case insensitive) 
	     will not show up in the family list if the CGI program name matches 
	     "fonts2go". But it will if the CGI program name is something else, for 
	     example "fonts3go". This allows for testing of new font packages (e.g., 
	     use a subfolder called "Gentium Plus Test").
	  -- In addition to the source font package, these folders may contain a file
	     named ".ttwrc". See below
	  -- In addition to the source font package, these folders may contain a file
	     named ".help_url". The first line of this file should be the URL of a
	     page or document that provides user help regarding the features supported
	     by the fonts in the package. [use of this file is deprecated]
	  -- Any file whose name ends in _TT (optionally followed by an extension, e.g.
	     FONTLOG_TT.txt) is processed by a script that replaces %DATE% and
	     %ISODATE% with the current date (Dallas timezone). The first of these
	     will be in "dd MMM yyyy" format, the second in "yyyy-mm-dd" format. The
	     resultant file will not include the "_TT" in its name.
	  -- As of 2010-11-24, arbitrary subfolder structures are allowed. The 
	     above-mentioned text modification of files whose name ends in _TT 
	     occurs in all subfolders.

/var/log/ttw
  -- location of TTW log files. There is one line of output for each successful use
     of TTW, and the lines identify who is using the service along with what fonts
     and features were requested, and could be used to generate some statistics. 
     Example lines:

		2010-10-12 15:23:19 scripts.sil.org to 75.151.118.139: AndikaBasic Digit Zero with slash; Capital Q alternate; Line spacing = Tight;
		2010-10-25 11:17:32 scripts.sil.org to 65.93.97.180: Scheherazade Language = Urdu; Shadda+kasra placement = Raised; Sukun = Open down; Dotless head of khah = Jasm open left; Downward comma; Six-nine dammatan; End of ayah = Simplified A; Old Shina hack = Unicode 4.0;
		2010-11-03 07:02:47 scripts.sil.org to 203.153.30.194: AndikaBasic Literacy alternates = False; Digit One without base; Digit Four with open top; Digit Six and Nine alternates; Line spacing = Tight;
		2010-11-03 07:30:26 scripts.sil.org to 196.43.68.137: CharisSIL Literacy alternates;
     
/tmp/
  -- folder containing temporary directory (name generated by tempdir()), and 
     temporary debug output file (named ttw*.txt). These are deleted upon successful
     completion of the script; but if the script crashes they will remain and may
     be helpful in figuring out what went wrong.

4. .ttwrc FILE

As mentioned above, each font family folder may include a .ttwrc file which provides
optional information to fonts2go.cgi. Lines in this file are of the form:

	keyword = value

where whitespace is allowed before and after the keyword and the value, and also within the value.
Currently three keywords are recognized:

	helpurl - value is the URL of a page or document that provides user help 
			regarding the features supported by the fonts in the package.
	
	omittedfeature - value is the name of a feature that should be completely 
			omitted from TTW's UI
	
	omittedvalue -- value is compound string which identifies a feature value 
			that should be omitted from TTW's UI. The format of this compound
			string is:  feature name : feature value

Example:

	helpurl = http://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&id=CharisSIL_Technical#TTW_Help
	omittedfeature = Small Caps
	omittedvalue = Line spacing : Imported 
	

5. DEBUGGING

Debugging CGI scripts can be a pain. To aid in that process, fonts2go.cgi sends
progress messages to a temporary file in the /tmp folder. The file will have a name
matching the pattern "ttw*.txt".  This file is normally deleted upon successful
completion of the script, but if the script crashes (or you comment out the 
appropriate unlink command), then you may get useful info out of this file.
     
Bob Hallissy  2010-11-24